{% extends 'base.html' %}

{% block title %}
  Excluir Profissional Administrativo
{% endblock %}

{% block content %}
  <h4>Excluir Profissional Administrativo</h4>
  <p>Você está prestes a excluir o Profissional Administrativo "{{ administrativo.id }}". Tem certeza?</p>
  <form method="post" action="{% url 'administrativoExcluir' administrativo.id %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Confirmar Exclusão</button>
  </form>
  <a href="{% url 'administrativoListagem' %}" class="btn btn-primary">Cancelar</a>
{% endblock %}

<!-- Modal de Agendamento -->
<div class="modal fade" id="agendamentoModal{{ agendamento.id }}" tabindex="-1" aria-labelledby="agendamentoModalLabel{{ agendamento.id }}" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="agendamentoModalLabel{{ agendamento.id }}">Agendamento de Pacientes</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="agendamentoForm{{ agendamento.id }}" method="POST" action="{% url 'agendamentoCreate' %}">
          {% csrf_token %}
          <input type="hidden" name="status_atendimento" value="pendente" />

          <!-- Contêiner para mensagens de erro -->
          <div id="formErrors{{ agendamento.id }}" class="alert alert-danger d-none"></div>

          <!-- Campo Paciente -->
          <div class="mb-3">
            <label for="id_paciente" class="form-label"><b>Paciente</b></label>
            {{ form.paciente }}
          </div>

          <!-- Campo Profissional de Saúde -->
          <div class="mb-3">
            <label for="id_profissional_saude" class="form-label"><b>Profissional de Saúde</b></label>
            {{ form.profissional_saude }}
          </div>

          <!-- Campo Data do Agendamento -->
          <div class="mb-3">
            <label for="id_data_agendamento" class="form-label"><b>Data do Agendamento</b></label>
            {{ form.data_agendamento }}
          </div>

          <!-- Campo Turno -->
          <div class="mb-3">
            <label for="id_turno" class="form-label"><b>Turno</b></label>
            {{ form.turno }}
          </div>

          <!-- Campo Prioridade de Atendimento -->
          <div class="mb-3 form-check">
            {{ form.prioridade_atendimento }}
            <label class="form-check-label" for="id_prioridade_atendimento"><b>Prioridade de Atendimento</b></label>
          </div>

          <div class="d-flex justify-content-center align-items-center">
            <button type="submit" class="btn btn-primary" style="margin-right: 10px;"><b>Agendar</b></button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><b>Cancelar</b></button>
          </div>
        </form>
      </div>

      <!-- Área de Confirmação -->
      <div id="confirmationArea{{ agendamento.id }}" class="confirmation-area d-none" style="padding: 1rem;">
        <h4>Confirmação de Agendamento</h4>
        <table class="table table-striped table-bordered">
          <tbody>
            <tr>
              <th>Paciente:</th>
              <td id="confirmPaciente{{ agendamento.id }}"></td>
            </tr>
            <tr>
              <th>Profissional de Saúde:</th>
              <td id="confirmProfissionalSaude{{ agendamento.id }}"></td>
            </tr>
            <tr>
              <th>Data do Agendamento:</th>
              <td id="confirmDataAgendamento{{ agendamento.id }}"></td>
            </tr>
            <tr>
              <th>Turno:</th>
              <td id="confirmTurno{{ agendamento.id }}"></td>
            </tr>
            <tr>
              <th>Prioridade de Atendimento:</th>
              <td id="confirmPrioridadeAtendimento{{ agendamento.id }}"></td>
            </tr>
          </tbody>
        </table>
        <div class="d-flex justify-content-between mt-2">
          <a class="btn btn-primary btn-sm" id="downloadComprovante{{ agendamento.id }}" href="#">Baixar Comprovante &nbsp;<i class="fa fa-file-pdf-o" aria-hidden="true"></i></a>
          <button class="btn btn-warning" data-bs-dismiss="modal"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i>&nbsp;Voltar para agendamento</button>
        </div>
      </div>
    </div>
  </div>
</div>
